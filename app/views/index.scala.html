@(todasMetas: List[List[Meta]], todosStatus: String, signupForm: Form[Meta])

@import helper._

@main("LaMeta") {
	<nav class="navbar navbar-fixed-top" style="background-color: rgb(40, 88, 22);" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#"><span class="light-color navbar-title" style="color:white;font-size:30px">LaMeta</span></a>
           		<ul class="nav navbar-nav">
		        	<li><button class="btn btn-default fixed'" style="margin-top:8px;margin-left:30%"  data-toggle="modal" data-target="#modal-nova-meta">Nova meta</button></li>
		       	</ul>
            </div>
        </div>
    </nav> 

    <div id="container" data-todosStatus="@todosStatus" style="margin-top:100px">
	    <div id="remainingHeight">
	    
   		@for(i <- 0 until todasMetas.length){
   			<div class="metas" id="semana-@i">
   				<div class="row">
   					<h2 style="color:white;font-family:'Short Stack', cursive;margin-left:40px" class="col-md-3">Para @(i+1) semana</h2><h4 style="margin-top: 28px;color: white" class="status col-md-5"></h4>
   				</div>
   				<hr class="col-md-7" style="border-top:3px dashed white;margin-top:-5px"/><br><br>
	   			<ul class="sticky_notes  connectedSortable" id="sortable1"/>
	   			@if(todasMetas.get(i).length == 0){
	   				<h3 style="color:white;font-family:'Short Stack', cursive;margin-left:40px">Nenhuma meta para está semana</h3>
	   			}else{
		   			@for(meta <- todasMetas.get(i)){
			 			<li class="@if(meta.isAlcancada()) {green} else {yellow}" data-id="@meta.getId()">
			   				<span style="width:100%;background-color:rgb(255, 115, 71);color:white;float:right">Prioridade: @meta.getPrioridade.name()
			   					<span style="float:right;margin-right:5px;cursor:pointer">
			   						<a class="deletar popconfirm" style="color:white">x</a>
			   					</span>
			   				</span><span class="m-top" style="padding:10px;">@meta.getDescricao()</span>
			   				<span style="float:right;width:100%;margin-top:5px">
			   				@if(meta.isAlcancada()) {
			   					<button type="button" style="padding: 3px;margin-top:55px" data-toggle="button" data-id="@meta.getId()" data-alcancada="1" class="btn btn-success alcancou active">Alcançada</button></span>
			   				}else{
			   					<button type="button" style="padding: 3px;margin-top:55px" data-toggle="button" data-id="@meta.getId()" data-alcancada="0" class="btn btn-warning alcancou">Não alcançada</button></span>
			   				}
			   			</li> 
		   			}
	   			}
	   			</ul>
   			</div>
   		}
	
		</div>   
	</div>
	
	<!-- Modal Nova meta-->
	<div class="modal fade" id="modal-nova-meta" tabindex="-1" role="dialog" aria-hidden="true">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	        <h4 class="modal-title" id="myModalLabel">Nova meta</h4>
	      </div>
	      <div class="modal-body">
	        @helper.form(action = routes.MetaController.nova, 'id -> "form-nova-meta") {
			    @inputText(
		            signupForm("descricao"), 
		            '_label -> "Descrição", 
		            '_help -> "Obrigatório",
		            'class -> "form-control",
		            'required -> "required",
		            'pattern -> "^(?:\\b\\S{1,20}\\b\\s*)+$"
		        )
		        <label for="descricao">Piroridade da meta</label>
		        <select name="prioridade" class="form-control">
				    @for(cType <- models.Prioridade.values()){
				        <option value="@cType.name()">@cType.getDescricao()</option>
				    }
				</select>
				<br>
				<label for="descricao">Prazo para alcançar a meta</label>
				<select name="duracao" class="form-control">
				    @for(cType <- models.Duracao.values()){
				        <option value="@cType.name()">@cType.getDescricao()</option>
				    }
				</select>
		    
		    }
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Fechar	</button>
	        <button type="submit"  form="form-nova-meta" class="btn btn-primary">Criar</button>
	      </div>
	    </div>
	  </div>
	</div>
}
